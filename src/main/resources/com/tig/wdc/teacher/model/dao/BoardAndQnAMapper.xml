<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tig.wdc.teacher.model.dao.BoardAndQnAMapper">

    <resultMap type="notice" id="noticeInfo">
        <id column="NOTICE_NO" property="no"/>
        <result column="NOTICE_TITLE" property="title"/>
        <result column="NOTICE_CONTENT" property="content"/>
        <result column="WRITE_DATE" property="writeDate"/>
        <result column="NOTICE_TYPE" property="type"/>
        <result column="IMPORTANT_YN" property="important"/>
        <result column="ADMIN_NO" property="adminNo"/>
    </resultMap>
    
    <select id="selectNoticeCount" resultType="_int">
        SELECT COUNT(NOTICE_NO) 
          FROM NOTICE 
         WHERE NOTICE_TYPE IN('A','T')    
    </select>
	<select id="selectNoticeList" parameterType="paging" resultMap="noticeInfo">
        SELECT 
               A.NOTICE_NO
             , A.NOTICE_TITLE
             , A.WRITE_DATE
             , A.IMPORTANT_YN
          FROM (SELECT ROWNUM RNUM
                      , B.NOTICE_NO
                      , B.NOTICE_TITLE
                      , B.WRITE_DATE
                      , B.IMPORTANT_YN
                  FROM (SELECT C.NOTICE_NO
                             , C.NOTICE_TITLE
                             , C.WRITE_DATE
                             , C.IMPORTANT_YN
                          FROM NOTICE C
                         WHERE C.NOTICE_TYPE IN('A','T')
                         ORDER BY C.IMPORTANT_YN DESC, C.NOTICE_NO DESC
                        ) B
               ) A
         WHERE A.RNUM BETWEEN #{ startRow } AND #{ endRow }	
	</select>
</mapper>